{% extends "pages/base.twig" %}

{% block pageName %}
{{ page.getName ()}}
{% endblock %}

{% block actionButtons %}
<a href="{{ route.newItem(page.getId())|raw }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i> Add New</a>
{% endblock %}

{% block pageContent %}
    {% verbatim %}
    <div ng-controller="SummaryTableController" >
    <div class="row">
        <div class="col-md-8">
            <div class="input-group col-md-5">
            <input type="text" class="form-control " placeholder="" ng-model="searchTerm"/>
              <span class="input-group-btn">
                <button class="btn btn-default" type="button" ng-click="filterColumns()" ng-disabled="searchTerm == ''">Search</button>
            </span>
        </div><!-- /input-group -->
    </div>
        <div class="col-md-4">
            <div class="pull-right">
                <p><a href="#" class="btn btn-sm btn-success" ng-click="advancedSearchHidden = !advancedSearchHidden">Advanced Search</a></p>
            </div>
        </div>
    </div>
    <div cg-busy="loadingPromise" >
    	<table class="table">
    		<thead>
    		<tr>
    			<th ng-repeat="col in columns">
    				{{ col.name }}
    			</th>
    		</tr>
    		</thead>
    		<tbody>
    			<tr ng-repeat="row in rows">
    				<td ng-repeat="col in columns">
                        <div ng-switch on="col.renderType">
                            <div ng-switch-when="string">
                                {{ row[col.key] }}
                            </div>
                            <div ng-switch-when="number">
                                {{ row[col.key] }}
                            </div>
                            <div ng-switch-when="datetime">
                                {{ row[col.key] }}
                            </div>
                            <div ng-switch-when="primaryLink">
                                <a ng-href="{{ itemLink(row, col) }}">{{ row[col.key] }}</a>
                            </div>
                        </div>
    				</td>
    			</tr>
    		</tbody>
    	</table>
    	<pagination total-items="rowCount" ng-model="currentPage" items-per-page=10  ng-change="pageChanged()"></pagination>
    {% endverbatim %}
    </div>
    </div>
    <script type="text/javascript">
        window.pageId = "{{ page.getId() }}";
    </script>
{% endblock %}